<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" class="h-full" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D,%22class%22:%7B%22ssr%22:%22h-full%22%7D%7D">
  <head>
    <title>Redis University RU202 - Minggu Ke-2 </title><meta name="gridsome:hash" content="3f4bf2c2acdd3ecda488b692f010f187723da530"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="theme-color" content="#1a202c"><meta data-vue-tag="ssr" data-key="description" name="description" content="Catatan kelas Redis University RU102 minggu ke-2"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Redis University RU202 - Minggu Ke-2"><meta data-vue-tag="ssr" property="og:description" content="Catatan kelas Redis University RU102 minggu ke-2"><meta data-vue-tag="ssr" property="og:url" content="https://www.emsifa.com/artikel/redis-university-ru202-minggu-ke-2/"><meta data-vue-tag="ssr" property="article:published_time" content="undefined"><meta data-vue-tag="ssr" property="og:image" content="https://www.emsifa.com/images/posts/ru202-w2-cover.png"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="Redis University RU202 - Minggu Ke-2"><meta data-vue-tag="ssr" name="twitter:description" content="Catatan kelas Redis University RU102 minggu ke-2"><meta data-vue-tag="ssr" name="twitter:site" content="@cossssmin"><meta data-vue-tag="ssr" name="twitter:creator" content="@cossssmin"><meta data-vue-tag="ssr" name="twitter:image" content="/images/posts/ru202-w2-cover.png"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.74da076e48a2b4ada66099d4f12215f4.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.74da076e48a2b4ada66099d4f12215f4.png"><link rel="preload" href="/assets/css/9.styles.5c11bc3d.css" as="style"><link rel="preload" href="/assets/js/app.7018cf29.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.c0e9f36f.js" as="script"><link rel="prefetch" href="/assets/js/11.0f98a1ef.js"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.0ce9f9ea.js"><link rel="prefetch" href="/assets/js/page--src-pages-artikel-vue.c5d0d9d8.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.026ad315.js"><link rel="prefetch" href="/assets/js/page--src-pages-open-sources-vue.a82ed9ec.js"><link rel="prefetch" href="/assets/js/page--src-templates-author-vue.8270f084.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.77d06a93.js"><link rel="prefetch" href="/assets/js/vendors~page--src-pages-artikel-vue~page--src-pages-index-vue~page--src-pages-open-sources-vue~page-~f457dff2.6d23a2bb.js"><link rel="prefetch" href="/assets/js/vendors~page--src-templates-post-vue.8b322f2d.js"><link rel="stylesheet" href="/assets/css/9.styles.5c11bc3d.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body class="antialiased" data-vue-tag="%7B%22class%22:%7B%22ssr%22:%22antialiased%22%7D%7D">
    <div data-server-rendered="true" id="app" class="min-h-screen light"><header class="select-none mb-5 shadow-lg border-gray-200" data-v-1b58b763><div class="container m-auto max-w-3xl px-5 md:px-0 py-5" data-v-1b58b763><div class="flex" data-v-1b58b763><div class="w-10/12" data-v-1b58b763><a href="/" class="text-black w-full inline-block active" data-v-1b58b763><div class="flex" data-v-1b58b763><div class="w-auto" data-v-1b58b763><img src="/images/logo.svg" alt="Logo" class="inline" data-v-1b58b763></div><div class="w-auto ml-3 pt-2" data-v-1b58b763><h1 class="text-normal font-semibold text-gray-700" data-v-1b58b763>
                Webnya Muhammad Syifa
              </h1><h2 class="text-sm text-gray-700 text-gray-700" data-v-1b58b763>
                Ini halaman artikel
              </h2></div></div></a></div><div class="w-2/12 text-right pt-3" data-v-1b58b763><button title="Gelapin" class="
            p-2
            rounded-full
            bg-transparent
            transition-all
            focus:outline-none
           hover:bg-yellow-200" data-v-1b58b763><img src="/images/sun.svg" alt="Sun" style="width:30px;height:30px;" data-v-1b58b763><!----></button></div></div></div></header><main><header><div class="container m-auto max-w-3xl px-5 md:px-0"><div class="mx-auto pb-5 border-b border-gray-200 text-gray-700"><img alt="Redis University RU202 - Minggu Ke-2" src="/images/posts/ru202-w2-cover.png" class="rounded-xl shadow-xl g-image"><h1 class="text-3xl sm:text-3xl leading-tight font-sans font-semibold mb-3 mt-5">
        Redis University RU202 - Minggu Ke-2
      </h1><p class="text-sm"><time datetime="2019-08-23 11:00:00" class="capitalize">23 Agustus 2019</time></p><p class="text-xs mt-2 uppercase"></p><div class="tags mt-5"><a href="/tag/Redis%20University/" class="
          inline-block
          font-sans
          font-semibold
          text-xs
          sm:text-sm
          px-2
          py-1
          mr-2
          mb-2
          rounded
          transition-color
          transition-bg
         text-gray-700 bg-gray-200 hover:text-white hover:bg-gray-700">
          Redis University
        </a><a href="/tag/Course/" class="
          inline-block
          font-sans
          font-semibold
          text-xs
          sm:text-sm
          px-2
          py-1
          mr-2
          mb-2
          rounded
          transition-color
          transition-bg
         text-gray-700 bg-gray-200 hover:text-white hover:bg-gray-700">
          Course
        </a><a href="/tag/RU202/" class="
          inline-block
          font-sans
          font-semibold
          text-xs
          sm:text-sm
          px-2
          py-1
          mr-2
          mb-2
          rounded
          transition-color
          transition-bg
         text-gray-700 bg-gray-200 hover:text-white hover:bg-gray-700">
          RU202
        </a></div></div></div></header><div class="container m-auto max-w-3xl px-5 md:px-0"><article class="pt-5 border-grey-200"><div class="markdown text-lg leading-normal text-gray-700 pb-10"><p>Ini adalah catatan minggu ke-2 dari apa yang saya pelajari di kelas RU202-nya <a href="https://university.redislabs.com" target="_blank" rel="nofollow noopener noreferrer">Redis University</a> yang berjudul <strong>"Redis Streams"</strong>.</p>
<p>Pada minggu ke-2 ini topik pembahasannya adalah:</p>
<ol>
<li>Producer</li>
<li>Range Queries</li>
<li>The Consumer</li>
</ol>
<h2 id="1-producer"><a href="#1-producer" aria-hidden="true"><span class="icon icon-link"></span></a>1. Producer</h2>
<p>Pada bagian ini dijelaskan panjang lebar mengenai <em>stream producer</em>, disini saya rangkum saja kedalam beberapa poin dibawah ini: </p>
<ul>
<li><em>Stream Producer</em> adalah software/aplikasi yang berperan sebagai pengirim data kedalam stream.</li>
<li>Data di dalam stream disebut sebagai 'message'.</li>
<li><em>Stream Producer</em> menggunakan Redis Client API untuk memasukkan message kedalam stream.</li>
<li>Pada Redis CLI, kita bisa menggunakan perintah <code>XADD stream_name message_id field value [field_2 value_2 ... field_n value_n]</code> untuk menambahkan message kedalam stream. Contoh untuk mengirim data temperatur kedalam stream: <code>XADD temperature * celcius 39</code>.</li>
</ul>
<h4 id="message-id"><a href="#message-id" aria-hidden="true"><span class="icon icon-link"></span></a>Message ID</h4>
<ul>
<li>Untuk generate message ID secara otomatis, gunakan <code>*</code> (seperti contoh diatas). </li>
<li>Message ID tidak dapat diubah.</li>
<li>
<p>Contoh message ID hasil generate: <code>1566533258158-0</code></p>
<ul>
<li><code>1566533258158</code>: <em>millisecond-timestamp</em>.</li>
<li><code>0</code>: <em>sub-millisecond-sequence</em>, jika terdapat pesan dalam <em>millisecond-timestamp</em> yang sama, maka angka ini bertambah. Dan angka ini akan 0 kembali pada <em>millisecond-timestamp</em> yang berbeda.</li>
</ul>
</li>
<li>
<p>Contoh membuat message ID secara manual: <code>XADD mystream 100 x 1</code>.</p>
<ul>
<li>Message ID harus berupa unsigned integer (paling kecil 0).</li>
<li>Hasil ID digenerate: <code>100-0</code> dimana <code>0</code> adalah urutan dari id <code>100</code>.</li>
<li>Catatan: setelah menambahkan message dengan ID 100 kedalam stream mystream, maka kita tidak dapat menambahkan message dengan ID dibawah 100 kedalam stream mystream tersebut.</li>
</ul>
</li>
</ul>
<h4 id="message-payload"><a href="#message-payload" aria-hidden="true"><span class="icon icon-link"></span></a>Message Payload</h4>
<ul>
<li>Message payload pada Redis Stream memiliki struktur data seperti hash (<code>Map&#x3C;String, String></code>).</li>
<li>Tidak ada batasan berapa field yang dapat disimpan didalam setiap message.</li>
<li>
<p>Redis akan secara otomatis melakukan kompresi pada nama field di stream yang sama, contoh:</p>
<ul>
<li><code>XADD coordinates * latitude 0.1 longitude 1.0</code></li>
<li><code>XADD coordinates * latitude 0.2 longitude 1.0</code></li>
<li><code>XADD coordinates * latitude 0.3 longitude 1.1</code></li>
<li>Pada 3 perintah <code>XADD</code> diatas, maka redis tidak akan menyimpan nama field <code>latitude</code> dan <code>longitude</code> pada 2 perintah <code>XADD</code> bawahnya.</li>
<li>Tapi, jika perintah <code>XADD</code> selanjutnya memiliki field yang berbeda, entah ditambah field baru, atau ada field yang berubah, maka redis akan menyimpan nama field message tersebut secara utuh.</li>
</ul>
</li>
</ul>
<h4 id="managing-the-length-of-a-stream"><a href="#managing-the-length-of-a-stream" aria-hidden="true"><span class="icon icon-link"></span></a>Managing the Length of a Stream</h4>
<p>Untuk membatasi banyaknya message pada stream supaya tidak terlalu bengkak, dapat gunakan beberapa cara berikut:</p>
<ol>
<li>Gunakan <code>XADD</code> dengan <code>MAXLEN</code>. Contoh <code>XADD mystream * foo bar MAXLEN 1000</code>, maka jika ini adalah message yang ke-1001, message paling lama akan dihapus sehingga jumlah messagenya menjadi 1000.</li>
<li>Gunakan perintah <code>XDEL</code>. Cara ini tidak dianjurkan karena tidak efektif.</li>
<li>Gunakan perintah <code>XTRIM</code>. Contoh <code>XTRIM mystream MAXLEN 1000</code>, maka message ke 1001 sampai dengan yang paling lama akan dihapus.</li>
</ol>
<p>Yang saya masih bingung setelah melakukan proses diatas, message pada stream memang betul akan hilang,
dalam artian ketika kita gunakan <code>XRANGE mystream - +</code> message yang terhapus tidak lagi muncul. Tetapi saat digunakan <code>MEMORY USAGE mystream</code>, memori yang terpakai masih sama. Dia ngasih tau sih memang saat menghapus message pada stream, message tidak secara langsung hilang, melainkan hanya diberi flag "deleted". Cuma yang masih belum saya tau, kapan memori tersebut benar-benar dihapus?</p>
<p>Selain cara diatas, sebetulnya ada cara lain yang disarankan, yaitu menggunakan <code>XTRIM mystream MAXLEN ~ 1000</code>, atau <code>XADD mystream * foo bar MAXLEN ~ 1000</code>, ini penjelasan mereka tentang tanga <code>~</code>:</p>
<blockquote>
<p>The ~ argument between the MAXLEN option and the actual count means that the user is not really requesting that the stream length is exactly 1000 items, but instead it could be a few tens of entries more, but never less than 1000 items. When this option modifier is used, the trimming is performed only when Redis is able to remove a whole macro node. This makes it much more efficient, and it is usually what you want.</p>
</blockquote>
<p>Kenapa saya tidak masukkan cara ini di list, karena saya belum mengerti betul cara kerja si <code>~</code> itu.
Disitu tertulis "could be a few tens of entries more", jadi saya coba buat stream dengan 100 message, dengan harapan setelah saya coba <code>XTRIM mystream MAXLEN ~ 10</code> maka akan menghapus <code>mystream</code> menjadi 10-50 message (few tens more). Tapi ternyata tidak terjadi apa-apa, <code>XLEN mystream</code> masih tetap 100.</p>
<p>Entahlah, mungkin kalau messagenya ribuan bakal dihapus. Mungkin.</p>
<h2 id="2-range-queries"><a href="#2-range-queries" aria-hidden="true"><span class="icon icon-link"></span></a>2. Range Queries</h2>
<p>Untuk mengambil  message dalam range ID tertentu, dapat menggunakan perintah <code>XRANGE</code> dan <code>XREVRANGE</code>. Perbedaannya adalah <code>XRANGE</code> akan mengambil message dan mengurutkannya secara <em>ascending</em> (dari paling awal), <code>XREVRANGE</code> akan mengambil message dan mengurutkannya secara <em>descending</em> (dari paling akhir).</p>
<p>Berikut contoh-contoh penggunaan <code>XRANGE</code> dan <code>XREVRANGE</code>:</p>
<div class='code-container'><pre class="shiki" style="background-color: #292D3E"><code><span class="line"><span style="color: #676E95"># Beberapa cara mengambil semua message di dalam mystream</span></span>
<span class="line"><span style="color: #A6ACCD">XRANGE mystream - +</span></span>
<span class="line"><span style="color: #A6ACCD">XRANGE mystream 0-0 +</span></span>

<span class="line"><span style="color: #676E95"># Mengambil semua message dari 1526985054069-0 s/d data terakhir di dalam mystream</span></span>
<span class="line"><span style="color: #A6ACCD">XRANGE mystream 1526985054069-0 +</span></span>

<span class="line"><span style="color: #676E95"># Mengambil semua message diantara 1526985054069-0 s/d 1531243452312-0 terakhir di dalam mystream</span></span>
<span class="line"><span style="color: #A6ACCD">XRANGE mystream 1526985054069-0 1531243452312-0</span></span>

<span class="line"><span style="color: #676E95"># Mengambil 10 message PERTAMA dari mystream</span></span>
<span class="line"><span style="color: #A6ACCD">XRANGE mystream - + COUNT 10</span></span>

<span class="line"><span style="color: #676E95"># Mengambil 10 message TERAKHIR dari mystream</span></span>
<span class="line"><span style="color: #A6ACCD">XREVRANGE mystream + - COUNT 10</span></span></code></pre></div>
<p>Tanda <code>-</code> dan <code>+</code> adalah special ID, <code>-</code> adalah alias untuk ID awal (0-0), sedangkan <code>+</code> adalah alias untuk ID terakhir (18446744073709551615-18446744073709551615).</p>
<h2 id="3-the-consumer"><a href="#3-the-consumer" aria-hidden="true"><span class="icon icon-link"></span></a>3. The Consumer</h2>
<p>Untuk men-<em>consume</em> data pada stream, dapat menggunakan perintah <code>XREAD</code>. Berikut adalah beberapa contoh penggunaan <code>XREAD</code>.</p>
<div class='code-container'><pre class="shiki" style="background-color: #292D3E"><code><span class="line"><span style="color: #A6ACCD">XREAD COUNT 1 STREAMS mystream</span></span></code></pre></div>
</div></article></div><section class="mb-10 py-16 bg-gray-200 text-gray-700"><div class="container m-auto max-w-3xl px-5 md:px-0"><div class="flex"><div class="w-10/12 mx-auto"><h4 class="text-2xl font-semibold mb-4 -mt-4">Suka artikel ini?</h4><p class="mb-8">
          Saya biasanya share artikel-artikel terbaru via
          <strong class="text-gray-700">facebook</strong> atau <strong class="text-gray-700">fanpage foobarology</strong> saya.
          Kalau mau dapat updatenya, di add friend/like/follow aja link-link dibawah ini 😃
        </p><a target="_blank" rel="noopener" href="https://www.facebook.com/em.sifa" class="px-4 py-2 text-lg text-white bg-gray-600 hover:bg-blue-500 rounded">
          Facebook
        </a><a target="_blank" rel="noopener" href="https://www.facebook.com/foobarology" class="ml-3 px-4 py-2 text-lg text-white bg-gray-600 hover:bg-blue-500 rounded">
          Foobarology
        </a></div></div></div></section><footer class="text-gray-700 text-sm leading-normal flex flex-wrap justify-between mx-auto max-w-3xl px-6 sm:px-12 pb-8 sm:pb-10"><div class="w-full sm:w-1/2 mb-4 sm:mb-0 text-gray-700"><p>© 2019</p></div><div class="w-full sm:w-1/2"><nav><ul class="flex sm:justify-end -mx-2"><li class="px-2"><a href="/" class="text-gray-700 border-b border-transparent hover:border-gray-400 transition-border-color active">Home</a></li><li class="px-2"><a href="/sitemap.xml" class="text-gray-700 border-b border-transparent hover:border-gray-400 transition-border-color">Sitemap</a></li><li class="px-2"><a href="/feed.xml" class="text-gray-700 border-b border-transparent hover:border-gray-400 transition-border-color">RSS Feed</a></li></ul></nav></div></footer></main></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Redis University RU202 - Minggu Ke-2","slug":"redis-university-ru202-minggu-ke-2","datetime":"2019-08-23 11:00:00","content":"\u003Cp\u003EIni adalah catatan minggu ke-2 dari apa yang saya pelajari di kelas RU202-nya \u003Ca href=\"https:\u002F\u002Funiversity.redislabs.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ERedis University\u003C\u002Fa\u003E yang berjudul \u003Cstrong\u003E\"Redis Streams\"\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EPada minggu ke-2 ini topik pembahasannya adalah:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EProducer\u003C\u002Fli\u003E\n\u003Cli\u003ERange Queries\u003C\u002Fli\u003E\n\u003Cli\u003EThe Consumer\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 id=\"1-producer\"\u003E\u003Ca href=\"#1-producer\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E1. Producer\u003C\u002Fh2\u003E\n\u003Cp\u003EPada bagian ini dijelaskan panjang lebar mengenai \u003Cem\u003Estream producer\u003C\u002Fem\u003E, disini saya rangkum saja kedalam beberapa poin dibawah ini: \u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cem\u003EStream Producer\u003C\u002Fem\u003E adalah software\u002Faplikasi yang berperan sebagai pengirim data kedalam stream.\u003C\u002Fli\u003E\n\u003Cli\u003EData di dalam stream disebut sebagai 'message'.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cem\u003EStream Producer\u003C\u002Fem\u003E menggunakan Redis Client API untuk memasukkan message kedalam stream.\u003C\u002Fli\u003E\n\u003Cli\u003EPada Redis CLI, kita bisa menggunakan perintah \u003Ccode\u003EXADD stream_name message_id field value [field_2 value_2 ... field_n value_n]\u003C\u002Fcode\u003E untuk menambahkan message kedalam stream. Contoh untuk mengirim data temperatur kedalam stream: \u003Ccode\u003EXADD temperature * celcius 39\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"message-id\"\u003E\u003Ca href=\"#message-id\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMessage ID\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003EUntuk generate message ID secara otomatis, gunakan \u003Ccode\u003E*\u003C\u002Fcode\u003E (seperti contoh diatas). \u003C\u002Fli\u003E\n\u003Cli\u003EMessage ID tidak dapat diubah.\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EContoh message ID hasil generate: \u003Ccode\u003E1566533258158-0\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E1566533258158\u003C\u002Fcode\u003E: \u003Cem\u003Emillisecond-timestamp\u003C\u002Fem\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E0\u003C\u002Fcode\u003E: \u003Cem\u003Esub-millisecond-sequence\u003C\u002Fem\u003E, jika terdapat pesan dalam \u003Cem\u003Emillisecond-timestamp\u003C\u002Fem\u003E yang sama, maka angka ini bertambah. Dan angka ini akan 0 kembali pada \u003Cem\u003Emillisecond-timestamp\u003C\u002Fem\u003E yang berbeda.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EContoh membuat message ID secara manual: \u003Ccode\u003EXADD mystream 100 x 1\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EMessage ID harus berupa unsigned integer (paling kecil 0).\u003C\u002Fli\u003E\n\u003Cli\u003EHasil ID digenerate: \u003Ccode\u003E100-0\u003C\u002Fcode\u003E dimana \u003Ccode\u003E0\u003C\u002Fcode\u003E adalah urutan dari id \u003Ccode\u003E100\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003ECatatan: setelah menambahkan message dengan ID 100 kedalam stream mystream, maka kita tidak dapat menambahkan message dengan ID dibawah 100 kedalam stream mystream tersebut.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"message-payload\"\u003E\u003Ca href=\"#message-payload\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMessage Payload\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003EMessage payload pada Redis Stream memiliki struktur data seperti hash (\u003Ccode\u003EMap&#x3C;String, String\u003E\u003C\u002Fcode\u003E).\u003C\u002Fli\u003E\n\u003Cli\u003ETidak ada batasan berapa field yang dapat disimpan didalam setiap message.\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ERedis akan secara otomatis melakukan kompresi pada nama field di stream yang sama, contoh:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003EXADD coordinates * latitude 0.1 longitude 1.0\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EXADD coordinates * latitude 0.2 longitude 1.0\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EXADD coordinates * latitude 0.3 longitude 1.1\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EPada 3 perintah \u003Ccode\u003EXADD\u003C\u002Fcode\u003E diatas, maka redis tidak akan menyimpan nama field \u003Ccode\u003Elatitude\u003C\u002Fcode\u003E dan \u003Ccode\u003Elongitude\u003C\u002Fcode\u003E pada 2 perintah \u003Ccode\u003EXADD\u003C\u002Fcode\u003E bawahnya.\u003C\u002Fli\u003E\n\u003Cli\u003ETapi, jika perintah \u003Ccode\u003EXADD\u003C\u002Fcode\u003E selanjutnya memiliki field yang berbeda, entah ditambah field baru, atau ada field yang berubah, maka redis akan menyimpan nama field message tersebut secara utuh.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"managing-the-length-of-a-stream\"\u003E\u003Ca href=\"#managing-the-length-of-a-stream\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EManaging the Length of a Stream\u003C\u002Fh4\u003E\n\u003Cp\u003EUntuk membatasi banyaknya message pada stream supaya tidak terlalu bengkak, dapat gunakan beberapa cara berikut:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EGunakan \u003Ccode\u003EXADD\u003C\u002Fcode\u003E dengan \u003Ccode\u003EMAXLEN\u003C\u002Fcode\u003E. Contoh \u003Ccode\u003EXADD mystream * foo bar MAXLEN 1000\u003C\u002Fcode\u003E, maka jika ini adalah message yang ke-1001, message paling lama akan dihapus sehingga jumlah messagenya menjadi 1000.\u003C\u002Fli\u003E\n\u003Cli\u003EGunakan perintah \u003Ccode\u003EXDEL\u003C\u002Fcode\u003E. Cara ini tidak dianjurkan karena tidak efektif.\u003C\u002Fli\u003E\n\u003Cli\u003EGunakan perintah \u003Ccode\u003EXTRIM\u003C\u002Fcode\u003E. Contoh \u003Ccode\u003EXTRIM mystream MAXLEN 1000\u003C\u002Fcode\u003E, maka message ke 1001 sampai dengan yang paling lama akan dihapus.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EYang saya masih bingung setelah melakukan proses diatas, message pada stream memang betul akan hilang,\ndalam artian ketika kita gunakan \u003Ccode\u003EXRANGE mystream - +\u003C\u002Fcode\u003E message yang terhapus tidak lagi muncul. Tetapi saat digunakan \u003Ccode\u003EMEMORY USAGE mystream\u003C\u002Fcode\u003E, memori yang terpakai masih sama. Dia ngasih tau sih memang saat menghapus message pada stream, message tidak secara langsung hilang, melainkan hanya diberi flag \"deleted\". Cuma yang masih belum saya tau, kapan memori tersebut benar-benar dihapus?\u003C\u002Fp\u003E\n\u003Cp\u003ESelain cara diatas, sebetulnya ada cara lain yang disarankan, yaitu menggunakan \u003Ccode\u003EXTRIM mystream MAXLEN ~ 1000\u003C\u002Fcode\u003E, atau \u003Ccode\u003EXADD mystream * foo bar MAXLEN ~ 1000\u003C\u002Fcode\u003E, ini penjelasan mereka tentang tanga \u003Ccode\u003E~\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EThe ~ argument between the MAXLEN option and the actual count means that the user is not really requesting that the stream length is exactly 1000 items, but instead it could be a few tens of entries more, but never less than 1000 items. When this option modifier is used, the trimming is performed only when Redis is able to remove a whole macro node. This makes it much more efficient, and it is usually what you want.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EKenapa saya tidak masukkan cara ini di list, karena saya belum mengerti betul cara kerja si \u003Ccode\u003E~\u003C\u002Fcode\u003E itu.\nDisitu tertulis \"could be a few tens of entries more\", jadi saya coba buat stream dengan 100 message, dengan harapan setelah saya coba \u003Ccode\u003EXTRIM mystream MAXLEN ~ 10\u003C\u002Fcode\u003E maka akan menghapus \u003Ccode\u003Emystream\u003C\u002Fcode\u003E menjadi 10-50 message (few tens more). Tapi ternyata tidak terjadi apa-apa, \u003Ccode\u003EXLEN mystream\u003C\u002Fcode\u003E masih tetap 100.\u003C\u002Fp\u003E\n\u003Cp\u003EEntahlah, mungkin kalau messagenya ribuan bakal dihapus. Mungkin.\u003C\u002Fp\u003E\n\u003Ch2 id=\"2-range-queries\"\u003E\u003Ca href=\"#2-range-queries\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E2. Range Queries\u003C\u002Fh2\u003E\n\u003Cp\u003EUntuk mengambil  message dalam range ID tertentu, dapat menggunakan perintah \u003Ccode\u003EXRANGE\u003C\u002Fcode\u003E dan \u003Ccode\u003EXREVRANGE\u003C\u002Fcode\u003E. Perbedaannya adalah \u003Ccode\u003EXRANGE\u003C\u002Fcode\u003E akan mengambil message dan mengurutkannya secara \u003Cem\u003Eascending\u003C\u002Fem\u003E (dari paling awal), \u003Ccode\u003EXREVRANGE\u003C\u002Fcode\u003E akan mengambil message dan mengurutkannya secara \u003Cem\u003Edescending\u003C\u002Fem\u003E (dari paling akhir).\u003C\u002Fp\u003E\n\u003Cp\u003EBerikut contoh-contoh penggunaan \u003Ccode\u003EXRANGE\u003C\u002Fcode\u003E dan \u003Ccode\u003EXREVRANGE\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class='code-container'\u003E\u003Cpre class=\"shiki\" style=\"background-color: #292D3E\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #676E95\"\u003E# Beberapa cara mengambil semua message di dalam mystream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXRANGE mystream - +\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXRANGE mystream 0-0 +\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #676E95\"\u003E# Mengambil semua message dari 1526985054069-0 s\u002Fd data terakhir di dalam mystream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXRANGE mystream 1526985054069-0 +\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #676E95\"\u003E# Mengambil semua message diantara 1526985054069-0 s\u002Fd 1531243452312-0 terakhir di dalam mystream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXRANGE mystream 1526985054069-0 1531243452312-0\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #676E95\"\u003E# Mengambil 10 message PERTAMA dari mystream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXRANGE mystream - + COUNT 10\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #676E95\"\u003E# Mengambil 10 message TERAKHIR dari mystream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXREVRANGE mystream + - COUNT 10\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ETanda \u003Ccode\u003E-\u003C\u002Fcode\u003E dan \u003Ccode\u003E+\u003C\u002Fcode\u003E adalah special ID, \u003Ccode\u003E-\u003C\u002Fcode\u003E adalah alias untuk ID awal (0-0), sedangkan \u003Ccode\u003E+\u003C\u002Fcode\u003E adalah alias untuk ID terakhir (18446744073709551615-18446744073709551615).\u003C\u002Fp\u003E\n\u003Ch2 id=\"3-the-consumer\"\u003E\u003Ca href=\"#3-the-consumer\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E3. The Consumer\u003C\u002Fh2\u003E\n\u003Cp\u003EUntuk men-\u003Cem\u003Econsume\u003C\u002Fem\u003E data pada stream, dapat menggunakan perintah \u003Ccode\u003EXREAD\u003C\u002Fcode\u003E. Berikut adalah beberapa contoh penggunaan \u003Ccode\u003EXREAD\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cdiv class='code-container'\u003E\u003Cpre class=\"shiki\" style=\"background-color: #292D3E\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #A6ACCD\"\u003EXREAD COUNT 1 STREAMS mystream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n","description":"Catatan kelas Redis University RU102 minggu ke-2","timeToRead":4,"cover":"\u002Fimages\u002Fposts\u002Fru202-w2-cover.png","coverThumb":"\u002Fimages\u002Fposts\u002Fru202-w2-cover.png","fullscreen":false,"author":{"id":"Muhammad Syifa","title":"Muhammad Syifa","path":"\u002Fauthor\u002FMuhammad%20Syifa\u002F"},"tags":[{"id":"Redis University","title":"Redis University","path":"\u002Ftag\u002FRedis%20University\u002F"},{"id":"Course","title":"Course","path":"\u002Ftag\u002FCourse\u002F"},{"id":"RU202","title":"RU202","path":"\u002Ftag\u002FRU202\u002F"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.7018cf29.js" defer></script><script src="/assets/js/page--src-templates-post-vue.c0e9f36f.js" defer></script>
  </body>
</html>
