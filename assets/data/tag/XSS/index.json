{"hash":"3f4bf2c2acdd3ecda488b692f010f187723da530","data":{"tag":{"id":"XSS","title":"XSS","path":"/tag/XSS/","belongsTo":{"totalCount":1,"pageInfo":{"totalPages":1,"currentPage":1},"edges":[{"node":{"id":"116ffefcd4827a27cdb836df5a968e9d","title":"Cegah XSS dengan Content-Security-Policy","datetime":"2020-01-24 11:00:00","path":"/artikel/cegah-xss-dengan-csp/","icon":"/images/icons/www.png","content":"<p>Kemarin lusa (1/22), saya menerima laporan dari admin website kementerian yang saya buat kalau\nwebnya mengalami kendala hanya menampilkan <em>preloader</em> saja. Setelah saya cek melalui <em>devtools browser</em>,\npada bagian console, saya mendapati kalau <em>browser</em> tidak diizinkan untuk me-<em>load</em> <em>javascript</em>, <em>css</em>, maupun <em>font</em> yang berasal\ndari <a href=\"https://cdnjs.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cdnjs</a> dan <a href=\"https://unpkg.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">unpkg</a>. Alhasil sebagian script yang dibutuhkan\ntidak di-<em>load</em>, yaudah, rusak deh. Kurang lebih penampakan errornya (di Firefox) kayak gini:</p>\n<p><img src=\"/images/posts/ss-csp-error.png\" alt=\"CSP Error\"></p>\n<p>Ternyata sebelumnya dari pihak IT pusat sana, web servernya baru disetting untuk mengirimkan <em>header</em> <code>Content-Security-Policy</code> yang berisikan <em>whitelist</em> <em>host</em> mana saja yang diperbolehkan untuk di-<em>load</em> oleh website-website yang berada pada server naungan mereka, dan <em>cdnjs.cloudflare.com</em> serta <em>unpkg.com</em> tidak terdaftar dalam <em>whitelist</em> tersebut. Karena saya cuma dikasih akses ke sebagian fitur <em>cpanel</em>-nya aja, alhasil yang saya lakukan adalah mengunduh semua <em>resource</em> pada <em>CDN</em>, dan mengunggahnya ke server mereka, lalu mengubah kode <em>HTML</em> dari yang tadinya load ke <em>URL</em> <em>CDN</em> menjadi load ke <em>URL</em> website itu sendiri.</p>\n<p>Apa yang dilakukan IT pihak pusat memang sudah benar, yaitu mencegah potensi <em>XSS</em> dari berbagai website yang dikembangkan berbagai developer (dan vendor) yang hosting websitenya ke server mereka, dimana jika ada salah satu website saja <em>vuln</em>, maka website lain bisa terpengaruh karenanya.</p>\n<p>Setelah kejadian ini saya baca-baca lagi tentang <strong><em>Content-Security-Policy (CSP)</em></strong>, dan <del>supaya menjadi manfaat</del> karena blog saya udah lama ga update, saya tulis sekalian disini.</p>\n<blockquote>\n<p>Setelah ini saya akan singkat <strong><em>Content-Security-Policy</em></strong> menjadi <strong><em>CSP</em></strong> saja.</p>\n</blockquote>\n<h2 id=\"apa-itu-csp\"><a href=\"#apa-itu-csp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Apa itu <em>CSP</em>?</h2>\n<p><em>CSP</em> adalah <em>HTTP Response Header</em> atau <em>Meta Tag</em> untuk mengatur <strong>resource dari sumber mana saja</strong>\nyang diperbolehkan untuk dieksekusi oleh <em>web browser</em> (yang <a href=\"https://caniuse.com/#search=CSP\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mendukung <em>CSP</em></a> tentunya).</p>\n<p>Yang dimaksud <em>resource</em> disini itu ya <a href=\"https://en.wikipedia.org/wiki/Web_resource\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>web resource</em></a>, seperti <em>javascript</em>, <em>css</em>, <em>font</em>, <em>image</em>, <em>video</em>, <em>audio</em>, dsb.</p>\n<p>Dengan <em>CSP</em> kita dapat meminimalisir potensi-potensi serangan XSS pada website kita dengan memerintahkan <em>browser</em> untuk jangan me-<em>load</em> dan mengeksekusi <em>resource</em> dari sumber yang tidak kita inginkan.</p>\n<h2 id=\"apa-yang-bisa-kita-lakukan-dengan-csp\"><a href=\"#apa-yang-bisa-kita-lakukan-dengan-csp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Apa yang Bisa Kita Lakukan dengan <em>CSP</em>?</h2>\n<p>Dengan memberikan <em>CSP</em> ke halaman web kamu, kamu dapat:</p>\n<ul>\n<li>Mencegah <em>browser</em> untuk mengeksekusi <em>inline script</em> (<em>javascript</em> di <em>HTML</em>).</li>\n<li>Mencegah <em>browser</em> untuk mengeksekusi <code>eval</code>.</li>\n<li>Mencegah <em>browser</em> untuk mengeksekusi <em>inline style</em>.</li>\n<li>Mencegah <em>browser</em> untuk mengeksekusi <em>script</em>, <em>css</em>, <em>font</em>, gambar, video, suara, dsb diluar host yang kita tentukan.</li>\n<li>Mencegah <em>browser</em> untuk submisi form yang <code>action</code>-nya menuju ke host yang tidak kita daftarkan.</li>\n<li>Mencegah <em>browser</em> untuk menjalankan <em>Ajax</em>, maupun <em>WebSocket</em> diluar host yang kita tentukan.</li>\n<li>dll.</li>\n</ul>\n<h2 id=\"bagaimana-csp-dapat-mencegah-xss\"><a href=\"#bagaimana-csp-dapat-mencegah-xss\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bagaimana <em>CSP</em> dapat Mencegah <em>XSS</em>?</h2>\n<p>Serangan <em>XSS</em> umumnya berasal dari form yang disubmit oleh user, yang kemudian isian dari form tersebut di-<em>render</em> ke user lain sebagai kode <em>HTML</em> (tidak di-<em>escaping</em>).</p>\n<p>Contoh sederhananya adalah form komentar. Misalkan ada user memasukkan kode <code>&#x3C;script>alert('oi')&#x3C;/script></code> pada kolom komentar,  dan <em>server-side</em> tidak melakukan <em>escaping</em> terhadap data komentar tersebut, yang terjadi saat komentar tersebut di-<em>render</em> ke user lain adalah <em>browser</em> akan mengeksekusi <em>inline script</em>-nya dan menampilkan alert ke user.</p>\n<p>Dengan <em>CSP</em>, kita dapat menghindari hal ini dengan cara memerintahkan browser untuk jangan eksekusi <em>inline script</em>, melalui <em>response header</em> ataupun <em>meta tag</em> si <em>CSP</em>. Jadi sekalipun developer khilaf tidak melakukan <em>escaping</em>, serangan <em>XSS</em> dapat dihindari.</p>\n<p>Benefitnya akan sangat terasa kalau kamu punya website atau sedang mengelola server yang memiliki puluhan sampai ratusan halaman yang menampilkan data hasil inputan form didalamnya. Dengan <em>CSP</em> kamu cukup setting http server kamu (<em>nginx</em>/<em>apache</em>/dsb) untuk mengirimkan header <em>CSP</em>, dan <em>boom!</em> kamu tidak perlu lagi khawatir tentang <em>XSS</em>. Tapi sebelum melakukan ini, lebih baik kamu komunikasikan dulu hal ini ke tim developer, supaya ga ada kejadian seperti saya yang mengalami error saat production karena menggunakan <em>resource</em> dari sumber yang tidak \"direstui\".</p>\n<h2 id=\"penulisan-csp\"><a href=\"#penulisan-csp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Penulisan <em>CSP</em></h2>\n<p>Seperti yang sudah saya bilang sebelumnya, <em>CSP</em> dapat kita tuliskan pada <em>response header</em>, ataupun <em>meta tag</em>.\nHanya saja, artikel yang saya baca di halaman <a href=\"https://developers.google.com/web/fundamentals/security/csp#the_meta_tag\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google Developers</a> lebih menyarankan menggunakan <em>response header</em>. Jadi disini saya akan mencontohkan menggunakan <em>response header</em> saja.</p>\n<p>Untuk penulisan <em>header CSP</em>, formatnya adalah sebagai berikut:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">Content-Security-Policy: &lt;policy-directive-1&gt;; &lt;policy-directive-2&gt;; &lt;policy-directive-n&gt;</span></span></code></pre></div>\n<p>Sedangkan untuk penulisan <code>&#x3C;policy-directive></code> formatnya adalah seperti ini:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">&lt;directive-a&gt; &lt;source-1&gt; &lt;source-2&gt; &lt;source-n&gt;</span></span></code></pre></div>\n<p>Sebagai contoh, jika kita hanya memperbolehkan <em>load</em> <em>script</em> dan <em>css</em> dari <code>web-a.com</code> dan <code>web-b.com</code>,\nkita dapat menuliskan <em>CSP</em> seperti ini:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">Content-Security-Policy: script-src https://web-a.com https://web-b.com; style-src https://web-a.com https://web-b.com</span></span></code></pre></div>\n<p>Pada contoh diatas kita menggunakan <em>directive</em> <code>script-src</code> dan <code>style-src</code>.\nDibawah ini adalah daftar beberapa <em>directive</em> yang dapat kamu gunakan:</p>\n<ul>\n<li><code>connect-src</code>: membatasi akses ajax (<em>XMLHttpRequest</em>), <em>WebSocket</em>, dan <em>EventSource</em>.</li>\n<li><code>font-src</code>: membatasi akses font.</li>\n<li><code>img-src</code>: membatasi akses image.</li>\n<li><code>script-src</code>: membatasi akses script.</li>\n<li><code>style-src</code>: membatasi akses style (css).</li>\n<li><code>media-src</code>: membatasi akses video dan audio.</li>\n<li><code>worker-src</code>: membatasi akses service worker.</li>\n<li><code>child-src</code>: membatasi akses iframe dan worker.</li>\n<li><code>form-action</code>: membatasi <code>action</code> dari form.</li>\n<li><code>default-src</code>: kalau kamu malas jabarkan satu-persatu, kamu bisa gunakan ini untuk membatasi semua hal diatas.</li>\n</ul>\n<p>Daftar diatas bisa saja bertambah atau berubah suatu saat, untuk itu, selebihnya bisa kamu pelajari sendiri pada artikel <a href=\"https://developers.google.com/web/fundamentals/security/csp#policy_applies_to_a_wide_variety_of_resources\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>CSP</em> di Google Developers</a> atau panduan <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy#Directives\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>CSP</em> di MDN</a>.</p>\n<p>Selanjutnya, selain mendaftarkan <em>host</em> apa saja yang diperbolehkan, <em>CSP</em> juga memiliki beberapa keyword yang dapat kamu gunakan sebagai <code>&#x3C;source></code> seperti dibawah ini:</p>\n<ul>\n<li><code>'self'</code>: untuk memperbolehkan <em>browser</em> load resource dari domain yang sama dengan website di-<em>load</em>.</li>\n<li><code>'unsafe-inline'</code>: untuk memperbolehkan <em>browser</em> mengeksekusi <em>inline script</em> ataupun <em>inline style</em>.</li>\n<li><code>'unsafe-eval'</code>: untuk memperbolehkan <em>browser</em> mengeksekusi fungsi javascript <code>eval</code>.</li>\n<li><code>'none'</code>: jika kamu tidak memperbolehkan <em>browser</em> load resource dari sumber manapun.</li>\n</ul>\n<blockquote>\n<p>Keyword diatas harus kamu tulis dengan menyertakan tanda petik tunggal.</p>\n</blockquote>\n<h2 id=\"contoh-penerapan-csp\"><a href=\"#contoh-penerapan-csp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Contoh Penerapan <em>CSP</em></h2>\n<p>Pada bagian ini saya menuliskan contoh-contoh <em>CSP</em> umum yang mungkin banyak orang butuhkan.\nDisini dimisalkan saya <em>host</em> halaman-halaman contoh ini pada <code>https://www.emsifa.com</code>.</p>\n<blockquote>\n<p>Disini saya akan menggunakan PHP supaya lebih ringkas aja.</p>\n</blockquote>\n<h4 id=\"1-memperbolehkan-semua-jenis-resource-dari-domain-yang-sama\"><a href=\"#1-memperbolehkan-semua-jenis-resource-dari-domain-yang-sama\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>1. Memperbolehkan Semua Jenis Resource dari Domain yang Sama</h4>\n<p>Dari kebutuhan diatas, kita dapat terjemahkan menjadi:</p>\n<ul>\n<li>Semua Jenis Resource: <code>default-src</code></li>\n<li>Dari Domain yang Sama: <code>'self'</code></li>\n</ul>\n<p>Jadi penerapan <em>CSP</em>-nya adalah sebagai berikut:</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"contoh-1.php\" highlight=\"2\">contoh-1.php</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;?</span><span style=\"color: #A6ACCD\">php</span></span>\n\n<span class=\"line\"><span style=\"color: #82AAFF\">header</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Content-Security-Policy: default-src &#39;self&#39;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n\n<span class=\"line\"><span style=\"color: #89DDFF\">?&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">html</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">body</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.emsifa.com/js/app.js</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://cdnjs.cloudflare.com/jquery/jquery.min.js</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #82AAFF\">alert</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">hello</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">body</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">html</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div>\n<p>Pada contoh diatas, script <code>app.js</code> akan di-<em>load</em> dan dieksekusi oleh browser, sedangkan script jQuery tidak akan dieksekusi karena berada pada host <code>cdnjs.cloudflare.com</code>, dan script <code>alert('hello')</code> dibawahnya juga tidak akan dieksekusi karena kita tidak mendaftarkan <code>'unsafe-inline'</code> pada header CSP.</p>\n<h4 id=\"2-memperbolehkan-semua-jenis-resource-dari-sumber-yang-sama-dan-cdnjs\"><a href=\"#2-memperbolehkan-semua-jenis-resource-dari-sumber-yang-sama-dan-cdnjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>2. Memperbolehkan Semua Jenis Resource dari Sumber yang Sama dan CDN.js</h4>\n<p>Dari kebutuhan diatas, kalau kita terjemahkan kedalam CSP, menjadi:</p>\n<ul>\n<li>Semua Jenis Resource: <code>default-src</code></li>\n<li>Sumber yang sama dan CDN.js: <code>'self' https://cdnjs.cloudflare.com</code></li>\n</ul>\n<p>Kalau kita terapkan ke <em>CSP</em> akan menjadi:</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"contoh-2.php\" highlight=\"2\">contoh-2.php</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;?</span><span style=\"color: #A6ACCD\">php</span></span>\n\n<span class=\"line\"><span style=\"color: #82AAFF\">header</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Content-Security-Policy: default-src &#39;self&#39; https://cdnjs.cloudflare.com</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n\n<span class=\"line\"><span style=\"color: #89DDFF\">?&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">html</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">body</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.emsifa.com/js/app.js</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://cdnjs.cloudflare.com/jquery/jquery.min.js</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #82AAFF\">alert</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">hello</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">body</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">html</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div>\n<p>Pada contoh diatas, <code>app.js</code> dan jQuery akan di-<em>load</em> oleh <em>browser</em>, sedangkan script <code>alert('hello')</code> tetap diblokir oleh <em>browser</em>.</p>\n<h4 id=\"3-hanya-memperbolehkan-script-css-dan-image-dari-hosting-sendiri-tidak-memperbolehkan-video-dan-audio-apapun-tapi-memperbolehkan-embed-video-youtube\"><a href=\"#3-hanya-memperbolehkan-script-css-dan-image-dari-hosting-sendiri-tidak-memperbolehkan-video-dan-audio-apapun-tapi-memperbolehkan-embed-video-youtube\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>3. Hanya Memperbolehkan <em>Script</em>, <em>CSS</em>, dan <em>Image</em> dari <em>Hosting</em> Sendiri, tidak Memperbolehkan Video dan Audio Apapun, tapi memperbolehkan Embed Video Youtube</h4>\n<p>Oke, kita coba terjemahkan dulu kebutuhan diatas:</p>\n<ul>\n<li>Hanya Memperbolehkan Script CSS dan Image dari Hosting sendiri: artinya kita memerlukan 3 buah directive yaitu <code>script-src</code>, <code>style-src</code>, dan <code>img-src</code> yang memperbolehkan <code>'self'</code>.</li>\n<li>Tidak memperbolehkan Video dan Audio Apapun: artinya kita perlu menuliskan directive <code>media-src</code> menjadi <code>'none'</code>.</li>\n<li>Tapi memperbolehkan Embed Video Youtube: artinya kita perlu menuliskan directive <code>child-src</code> ke <code>https://youtube.com</code>.</li>\n</ul>\n<p>Kalau kita terapkan ke header <em>CSP</em> menjadi seperti ini:</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"contoh-3.php\" highlight=\"2\">contoh-3.php</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;?</span><span style=\"color: #A6ACCD\">php</span></span>\n\n<span class=\"line\"><span style=\"color: #82AAFF\">header</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Content-Security-Policy: script-src &#39;self&#39;; style-src &#39;self&#39;; img-src: &#39;self&#39;; media-src &#39;none&#39;; child-src https://youtube.com</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n\n<span class=\"line\"><span style=\"color: #89DDFF\">?&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">html</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">head</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">link rel</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stylesheet</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> href</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.emsifa.com/css/style.css</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">/&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">link rel</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stylesheet</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> href</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://cdnjs.cloudflare.com/bootstrap/css/bootstrap.min.css</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">/&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    img </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #A6ACCD\"> width</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #A6ACCD\">px</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">head</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">body</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">img src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.emsifa.com/img/logo.png</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">/&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">img src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.w3schools.com/img/logo.png</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">/&gt;</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">iframe width</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">560</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> height</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">315</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.youtube.com/embed/pTGRpH2dvRM</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> frameborder</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">0</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> allow</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #A6ACCD\"> allowfullscreen</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">iframe</span><span style=\"color: #89DDFF\">&gt;</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.emsifa.com/js/app.js</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://cdnjs.cloudflare.com/jquery/jquery.min.js</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #82AAFF\">alert</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">hello</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)&lt;/</span><span style=\"color: #A6ACCD\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">body</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #A6ACCD\">html</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div>\n<p>Dari seluruh resource pada kode HTML diatas, hasilnya adalah seperti ini:</p>\n<ol>\n<li>style <code>https://www.emsifa.com/css/style.css</code>: ✔.</li>\n<li>style <code>https://cdnjs.cloudflare.com/bootstrap/css/bootstrap.min.css</code>: ❌.</li>\n<li>inline style <code>img {width: 100px}</code>: ❌.</li>\n<li>image <code>https://www.emsifa.com/img/logo.png</code>: ✔.</li>\n<li>image <code>https://www.w3schools.com/img/logo.png</code>: ❌.</li>\n<li>iframe <code>https://www.youtube.com/embed/pTGRpH2dvRM</code>: ✔.</li>\n<li>script <code>https://www.emsifa.com/js/app.js</code>: ✔.</li>\n<li>script <code>https://cdnjs.cloudflare.com/jquery/jquery.min.js</code>: ❌.</li>\n<li>inline script <code>alert('hello')</code>: ❌.</li>\n</ol>\n<h2 id=\"penutup\"><a href=\"#penutup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Penutup</h2>\n<p>Jadi seperti itulah <em>CSP</em>, bagaimana penulisannya, serta beberapa contohnya.\nArtikel ini saya adaptasi dari 2 link dibawah ini:</p>\n<ul>\n<li><a href=\"https://developers.google.com/web/fundamentals/security/csp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://developers.google.com/web/fundamentals/security/csp</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy</a></li>\n</ul>\n<p>Yaudah, sekian dulu artikel kali ini. Semoga bermanfaat, dah ~ </p>\n","excerpt":"Kemarin lusa (1/22), saya menerima laporan dari admin website kementerian yang saya buat kalau webnya mengalami kendala hanya menampilkan preloader saja. Setelah saya cek melalui devtools browser,","description":"Gunakan CSP untuk mencegah browser eksekusi script dari sumber yang tidak diinginkan","author":{"id":"Muhammad Syifa","title":"Muhammad Syifa","path":"/author/Muhammad%20Syifa/"}}}]}}},"context":{}}