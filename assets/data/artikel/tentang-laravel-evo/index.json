{"hash":"1edf71e944044bc70c25b692f010f187723da530","data":{"post":{"title":"Ngoding Laravel dengan Gaya, pakai Laravel Evo","slug":"tentang-laravel-evo","datetime":"2021-07-21 11:00:00","content":"<p>Beberapa waktu lalu, saya membuat video cara membuat <em>framework</em> kekinian di <a href=\"https://www.youtube.com/channel/UCUDiqWobOUKHKz-KOkn5WYQ\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">kanal youtube saya</a>. Pada <em>framework</em> tersebut, saya menerapkan fitur terbaru pada <em>PHP</em> 8, yaitu <em>attribute</em>.</p>\n<p>Dan tidak lama setelahnya, saya coba menerapkan hal yang sama ke <em>Laravel</em>, dengan membuat <em>package</em> khusus <em>Laravel</em> yang saya beri nama <em>Evo</em>.</p>\n<p>Berikut ini adalah contoh controller saat menggunakan <em>Evo</em> (baris yang di-<em>highlight</em> adalah kode khusus <em>Evo</em>):</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"TodoController.php\" highlight=\"1,4,5,7-10,18\">TodoController.php</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">#[</span><span style=\"color: #82AAFF\">RoutePrefix</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">todos</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #A6ACCD\">)]</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">TodoController</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    #[</span><span style=\"color: #F07178\">Put</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">{id}</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #A6ACCD\">)]</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    #[Authenticated]</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">update</span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        #</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">Param</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> int $id</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        #</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">Body</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> UpdateTodoDTO $data</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        #</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">LoggedUser</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> User $user</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">):</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">UpdateTodoResponse</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">Todo</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\">:</span><span style=\"color: #82AAFF\">findOrFail</span><span style=\"color: #F07178\">(</span><span style=\"color: #A6ACCD\">$id</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">title</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">$data</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">title</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">is_completed</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">$data</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">completed</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">completed_by</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">$user</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">completed_at</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #82AAFF\">date</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Y-m-d H:i:s</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #82AAFF\">save</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">UpdateTodoResponse</span><span style=\"color: #F07178\">::</span><span style=\"color: #82AAFF\">fromArray</span><span style=\"color: #F07178\">(</span><span style=\"color: #A6ACCD\">$todo</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #82AAFF\">toArray</span><span style=\"color: #F07178\">())</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #F07178\"> </span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Buat kamu yang pernah mencoba <em>Nest.js</em>, mungkin familiar dengan kode diatas.\nKarena memang saya terinspirasi dari <em>Nest.js</em>.</p>\n<p>Pertanyaannya, untuk apa? gaya-gayaan doang atau ada maksudnya?</p>\n<p>Nah pada artikel ini, saya mau ceritakan manfaat dari penerapan kode seperti di atas.</p>\n<p>Btw, artikel ini saya tujukan orang-orang yang sudah pernah mengembangkan aplikasi dengan <em>Laravel</em>/<em>Lumen</em>. Jadi mungkin untuk yang belum pernah coba framework tersebut, akan sulit untuk memahami maksudnya.</p>\n<h4 id=\"memperjelas-spesifikasi-api-kamu\"><a href=\"#memperjelas-spesifikasi-api-kamu\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Memperjelas Spesifikasi API Kamu</h4>\n<p>Bayangin, kamu baru saja menjadi back-end developer di sebuah perusahaan, dan kamu mendapati kode controller seperti di bawah ini:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">store</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Request</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">Invoice</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #82AAFF\">findOrFail</span><span style=\"color: #89DDFF\">($</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">invoice_id</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">result</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">invoice</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #82AAFF\">toArray</span><span style=\"color: #89DDFF\">();</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">if</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">(!$</span><span style=\"color: #A6ACCD\">invoice</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">is_paid</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #89DDFF\">throw</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">new</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">InvoiceAlreadyPaidException</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">}</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #FFCB6B\">DB</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #82AAFF\">beginTransaction</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">new</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">Payment</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">invoice_id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">method </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">payment_method</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">user_id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">user</span><span style=\"color: #89DDFF\">()-&gt;</span><span style=\"color: #82AAFF\">id</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">amount </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">amount</span><span style=\"color: #89DDFF\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">if</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">($</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">payment_method </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">bank_transfer</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">account_number </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">account_number</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">bank_id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">bank_id</span><span style=\"color: #89DDFF\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">bank </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">Bank</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #82AAFF\">findOrFail</span><span style=\"color: #89DDFF\">($</span><span style=\"color: #A6ACCD\">request</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">bank_id</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">        </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">result</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">bank_name</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">bank</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">}</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #82AAFF\">save</span><span style=\"color: #89DDFF\">();</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #A6ACCD\">is_paid </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">true;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #82AAFF\">save</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #FFCB6B\">DB</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #82AAFF\">commit</span><span style=\"color: #89DDFF\">();</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">result </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">array_merge</span><span style=\"color: #89DDFF\">($</span><span style=\"color: #A6ACCD\">result</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment</span><span style=\"color: #89DDFF\">-&gt;</span><span style=\"color: #82AAFF\">toArray</span><span style=\"color: #89DDFF\">());</span></span>\n\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">return</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">response</span><span style=\"color: #89DDFF\">()-&gt;</span><span style=\"color: #82AAFF\">json</span><span style=\"color: #89DDFF\">($</span><span style=\"color: #A6ACCD\">result</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Hayo coba tebak, pada kode tersebut inputannya apa aja, dan struktur dari result-nya seperti apa?</p>\n<p>Sulit kan? tentu saja. Karena Programmernya menaruh inputan dan result di sembarang tempat, sehingga kita harus jeli melihat setiap baris untuk mengetahui input dan outputnya seperti apa. Itupun ga bisa hanya dilihat dari file itu aja, pada bagian <code>$result['invoice'] = $invoice->toArray()</code>, untuk tahu isi dari invoice, kita juga harus lihat struktur database pada table invoice. Ribet.</p>\n<p>Dengan <em>Evo</em>, kita dapat mendefinisikan input dan output langsung pada bagian kepala dari fungsi/method. Sehingga Programmer yang baru gabung, ga perlu membaca logika program hanya untuk tahu inputnya ada apa saja, dan outputnya akan seperti apa.</p>\n<p>Berikut adalah kode diatas, ditulis dengan cara <em>Evo</em>:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95\">#[Post]</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">store</span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[Body] StorePaymentDTO $data,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[LoggedUser] User $user,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">):</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">StorePaymentResponse</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">// logic program yang kurang lebih sama</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Untuk melihat inputnya seperti apa, pada VSCode dengan intelephense, kamu cukup tekan <code>ctrl</code> sambil arahkan cursor ke <code>StorePaymentDTO</code>. Dan kamu akan diperlihatkan <code>class</code> seperti ini, dimana propertinya adalah data dari request body.</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"StorePaymentDTO.php\">StorePaymentDTO.php</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">StorePaymentDTO</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">DTO</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice_id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">float</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">amount</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">payment_method</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">?</span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">account_number</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">?</span><span style=\"color: #C792EA\">int</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">bank_id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Begitu pula untuk mengetahui struktur dari output. Cukup arahkan ke <code>StorePaymentResponse</code>, dan kamu akan diperlihatkan <code>class</code> dengan property seperti ini:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">StorePaymentDTO</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">JsonResponse</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">float</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">amount</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">user_id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">method</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">?</span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">account_number</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">?</span><span style=\"color: #C792EA\">int</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">bank_id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">?</span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">bank_name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">InvoiceDTO</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">invoice</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Disana terlihat jelas, isinya apa saja, tipe datanya apa, serta nullable atau tidaknya.</p>\n<h4 id=\"membiasakan-diri-membuat-arah-yang-jelas\"><a href=\"#membiasakan-diri-membuat-arah-yang-jelas\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Membiasakan Diri membuat Arah yang Jelas</h4>\n<p>Programming pada dasarnya hanyalah tentang bagaimana memproses input menjadi output.\nInput adalah apa yang kita (Programmer) miliki, sedangkan output adalah hal yang kita tuju.\nMelakukan coding tanpa tahu inputnya apa saja, dan outputnya akan seperti apa, sama seperti bepergian tanpa tahu isi tas/dompet ada apa aja, dan ga tahu mau kemana, alias luntang-lantung.</p>\n<p>Menulis kode dengan cara <em>Evo</em>, melatih kamu untuk terbiasa mendefinisikan input dan output sebelum menuliskan logika program. Membiasakan kamu menyiapkan perbekalan dan menentukan tujuan sebelum bepergian.</p>\n<h4 id=\"menjaga-keharmonisan-antara-back-end-dengan-mobile-developer\"><a href=\"#menjaga-keharmonisan-antara-back-end-dengan-mobile-developer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Menjaga Keharmonisan antara Back-end dengan Mobile Developer</h4>\n<p>Kekurangan dari membuat <em>RESTful API</em> dengan bahasa yang <em>dynamic typing</em> seperti PHP atau Javascript adalah seringkali kita khilaf, lupa melakukan <em>casting</em> tipe data. Sedangkan aplikasi mobile biasanya dibuat menggunakan bahasa pemrograman yang <em>static typing</em>, yang mana salah mengirimkan tipe data bisa berakibat fatal. Hal ini seringkali menimbulkan perselisihan antara <em>mobile developer</em> dan <em>back-end developer</em>.</p>\n<p><em>Evo</em> mencegah ini dengan melakukan <em>automatic type casting</em>, dimana setiap request dan response akan otomatis di cast sesuai dengan tipe data yang kita definisikan pada <em>DTO</em> maupun <em>Response class</em>.</p>\n<p>Sebagai contoh, kita disuruh membuat response dengan struktur seperti ini:</p>\n<div class='code-container'><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">id</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">title</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">lorem ipsum dolor sit amet</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">is_completed</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">false,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">created_at</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2021-01-02 03:04:05</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Pada database MySQL, boolean itu diwakili dengan tipe data integer berisi 0 dan 1, yang kalau kita asal kirim isi dari database, maka mobile developer akan mendapatkan integer <code>0</code> atau <code>1</code>, lebih parahnya lagi malah kadang string <code>\"0\"</code> atau <code>\"1\"</code>.</p>\n<p>Dengan <em>Evo</em>, saat kamu mengirimkan response class seperti di bawah ini.</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"StoreTodoResponse.php\">StoreTodoResponse.php</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">StoreTodoResponse</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">JsonResponse</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">title</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">is_completed</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">created_at</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p><em>Evo</em> akan otomatis melakukan type casting, <code>id</code> menjadi integer, <code>title</code> menjadi string, <code>is_completed</code> menjadi boolean, dan <code>created_at</code> menjadi string.</p>\n<h4 id=\"validasi-otomatis\"><a href=\"#validasi-otomatis\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validasi Otomatis</h4>\n<p><em>Evo</em> melakukan pengecekan tipe data pada seluruh inputan yang dikirimkan dari HTTP request, entah itu <code>header</code>-nya, <code>query</code>-nya, <code>parameter</code>-nya, <code>cookie</code>-nya, serta <code>body</code>-nya.</p>\n<p>Contoh, saat kamu menuliskan <code>#[Query] int $page</code>, <em>Evo</em> akan menolak request dengan URL seperti <code>?page=bukan-angka</code>.</p>\n<p>Untuk validasi lebih <em>advance</em>-pun di <em>Evo</em> lebih jelas dengan atribut, contohnya ini:</p>\n<div class='code-container'><div class=\"code-metadata \" filename=\"RegisterDTO\">RegisterDTO</div><pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">RegisterDTO</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">DTO</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[Email(message: &quot;Emailnya ga valid wei&quot;)]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[Unique(table: &quot;users&quot;, column: &quot;email&quot;, message: &quot;Email sudah kepakai bro&quot;)]</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">email</span><span style=\"color: #89DDFF\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[Min(6, message: &quot;Password minimal 6 karakter gan&quot;)]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[Max(255, message: &quot;Kepanjangan jir&quot;)]</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">password</span><span style=\"color: #89DDFF\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">#[Max(255, &quot;Panjang amat! itu nama apa paragraf&quot;)]  </span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #A6ACCD\">name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre></div>\n<p>Disitu kita menuliskan validasi lewat atribut, yang mana lebih ramah untuk <em>Text Editor</em> atau <em>IDE</em>. Jadi kalau kamu lupa parameternya, <em>IDE</em>/<em>Text Editor</em> akan bantu mengingatkan tanpa kamu perlu bolak-balik buka dokumentasi <em>Laravel</em>. Keuntungan ini ga bisa kamu dapatkan dengan penjabaran <em>validation rules</em> via <em>string</em> ala <em>Laravel</em>.</p>\n<h4 id=\"lebih-mudah-dibaca-mesin\"><a href=\"#lebih-mudah-dibaca-mesin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Lebih Mudah dibaca Mesin</h4>\n<p>Saat menjabarkan input dan output dengan cara <em>Evo</em>, tidak cuma tim kamu yang bisa dengan mudah membaca spesifikasi API kamu. Tapi mesin juga.</p>\n<p>Terus kenapa kalau bisa dibaca mesin?</p>\n<p>Saat mesin bisa memahami keinginan kita, kita bisa menyuruh mesin membuatkan sesuatu untuk kita. Saat ini saya sedang membuatkan Swagger generator pada <em>Evo</em>. <em>Evo</em> akan membaca kode kamu dan menampilkan dokumentasi API secara otomatis, tanpa perlu kamu menuliskan OpenAPI secara manual. </p>\n<p>Yap, untuk yang ini memang masih tahap pengembangan. Tapi hal ini sangat memungkinkan. Karena di <em>Nest.js</em> pun begitu.</p>\n<p>Malah mungkin ga cuma Swagger generator. Tapi juga test generator, jadi <em>Evo</em> akan generate file test serta assertionnya secara otomatis mengikuti spesifikasi yang kita tuliskan.</p>\n<h2 id=\"penutup\"><a href=\"#penutup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Penutup</h2>\n<p>Itulah beberapa alasan kenapa saya membuat tools yang memanfaatkan penuh fitur atribut seperti pada <em>Evo</em> ini. Jadi bukan cuma untuk gaya-gayaan ya, banyak juga kok manfaatnya.</p>\n<p>Untuk <em>Evo</em> ini masih saya kembangkan sambil saya gunakan pada side-project saya.\nKalau kamu mau intip-intip pengembangannya bisa mampir ke <a href=\"https://github.com/emsifa/evo\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/emsifa/evo</a>.</p>\n<p>Sekian tulisan kali ini. Dadah ~</p>\n","description":"Laravel Evo bukan cuma tools untuk mempermudah coding, tapi juga melatih kebiasaan coding yang baik. Kok bisa?","timeToRead":5,"cover":"/images/posts/evo-cover.png","coverThumb":"/images/posts/evo-cover.png","fullscreen":false,"author":{"id":"Muhammad Syifa","title":"Muhammad Syifa","path":"/author/Muhammad%20Syifa/"},"tags":[{"id":"Laravel","title":"Laravel","path":"/tag/Laravel/"},{"id":"Evo","title":"Evo","path":"/tag/Evo/"}]}},"context":{}}